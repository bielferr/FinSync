<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Perfil - Blync</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="/js/auth.js"></script>
    <style>
        :root {
            --primary: #0066FF;
            --primary-dark: #0051CC;
            --secondary: #6B7280;
            --dark: #1F2937;
            --light: #F8FAFC;
            --white: #FFFFFF;
            --gray: #E5E7EB;
            --success: #10B981;
            --warning: #F59E0B;
            --error: #EF4444;
            --gradient: linear-gradient(135deg, #0066FF 0%, #0051CC 100%);
        }

        [data-theme="dark"] {
            --primary: #3B82F6;
            --primary-dark: #2563EB;
            --secondary: #9CA3AF;
            --dark: #F9FAFB;
            --light: #111827;
            --white: #1F2937;
            --gray: #374151;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: var(--white);
            transition: color 0.3s ease, background-color 0.3s ease;
        }

        /* Layout Base */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Navigation Styles - Corrigido */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--gray);
            z-index: 1000;
            padding: 16px 0;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 12px;
            font: 700 20px/1 'Inter', sans-serif;
            color: var(--dark);
        }

        .logo {
            width: 40px;
            height: 40px;
            background: var(--gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 18px;
        }

        .nav-menu {
            display: flex;
            gap: 32px;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: var(--secondary);
            font-weight: 500;
            transition: color 0.2s ease;
            padding: 8px 0;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--primary);
        }

        .nav-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        /* Mobile menu button */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--secondary);
            cursor: pointer;
            width: 40px;
            height: 40px;
            align-items: center;
            justify-content: center;
        }

        /* Componentes Reutiliz√°veis */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font: 500 14px/1 'Inter', sans-serif;
            transition: all 0.2s ease;
            border: none;
            cursor: pointer;
        }

        .btn-primary {
            background: var(--gradient);
            color: var(--white);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 102, 255, 0.3);
        }

        .btn-secondary {
            background: var(--light);
            color: var(--dark);
            border: 1px solid var(--gray);
        }

        .btn-secondary:hover {
            background: var(--gray);
            transform: translateY(-2px);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: var(--white);
        }

        .btn-white {
            background: var(--white);
            color: var(--primary);
        }

        .btn-white:hover {
            background: var(--light);
        }

        /* Tamanhos de Bot√£o */
        .btn-small { padding: 8px 16px; font-size: 12px; }
        .btn-large { padding: 16px 32px; font-size: 16px; }
        .btn-full { width: 100%; justify-content: center; }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--gray);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 24px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--dark);
        }

        /* Main Content */
        .main-content {
            padding: 100px 0 40px;
            background: var(--light);
            min-height: 100vh;
        }

        .page-header {
            margin-bottom: 32px;
        }

        .page-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--dark);
        }

        .page-subtitle {
            color: var(--secondary);
            font-size: 1.125rem;
        }

        .grid {
            display: grid;
            gap: 24px;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        }

        /* Badges */
        .badge-success {
            background: #D1FAE5;
            color: #065F46;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .badge-error {
            background: #FEE2E2;
            color: #991B1B;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* Stats */
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: var(--secondary);
            font-size: 0.875rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        .stat-card {
            text-align: center;
            padding: 16px;
            background: var(--light);
            border-radius: 12px;
        }

        /* Table */
        .table-container {
            overflow-x: auto;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            text-align: left;
            padding: 12px 16px;
            border-bottom: 1px solid var(--gray);
            color: var(--secondary);
            font-weight: 500;
            font-size: 0.875rem;
        }

        .table td {
            padding: 12px 16px;
            border-bottom: 1px solid var(--gray);
        }

        .table tbody tr:hover {
            background: var(--light);
        }

        /* User Info */
        .user-info {
            padding: 8px 0;
        }

        .info-grid {
            display: grid;
            gap: 16px;
        }

        .info-item label {
            font-size: 0.875rem;
            color: var(--secondary);
            display: block;
            margin-bottom: 4px;
        }

        .info-item p {
            font-weight: 500;
        }

        .balance-section {
            padding: 8px 0;
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: flex;
            }
            
            .nav-menu {
                position: fixed;
                top: 72px;
                left: 0;
                width: 100%;
                background: var(--white);
                flex-direction: column;
                padding: 20px;
                border-bottom: 1px solid var(--gray);
                display: none;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                gap: 16px;
            }
            
            .nav-menu.active {
                display: flex;
            }

            .main-content {
                padding: 90px 0 20px;
            }

            .grid-2 {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .table-container {
                font-size: 0.875rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 16px;
            }
            
            .page-title {
                font-size: 1.75rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="/" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 12px;">
                    <div class="logo">
                        <i class="fas fa-comments"></i>
                    </div>
                    <span class="brand-name">Blync</span>
                </a>
            </div>
            
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="nav-menu" id="navMenu">
                <a href="inicial.html" class="nav-link">Dashboard</a>
                <a href="historico.html" class="nav-link">Hist√≥rico</a>
                <a href="cartoes.html" class="nav-link">Cart√µes</a>
                <a href="perfil.html" class="nav-link active">Perfil</a>
            </div>
            
            <div class="nav-actions">
                <a href="login.html" class="btn btn-outline">Sair</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title">Meu Perfil</h1>
                <p class="page-subtitle">Gerencie suas informa√ß√µes pessoais e visualize seu saldo</p>
            </div>

            <div class="grid grid-2">
                <!-- Informa√ß√µes do Usu√°rio -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Informa√ß√µes Pessoais</h2>
                    </div>
                    
                    <div class="user-info">
                        <div class="user-avatar" style="text-align: center; margin-bottom: 24px;">
                            <div style="width: 80px; height: 80px; background: var(--gradient); border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; color: white; font-size: 32px; font-weight: 600;">
                                <span id="userInitials">US</span>
                            </div>
                        </div>
                        
                        <div class="info-grid">
                            <div class="info-item">
                                <label>Nome Completo</label>
                                <p id="userName">Carregando...</p>
                            </div>
                            
                            <div class="info-item">
                                <label>E-mail</label>
                                <p id="userEmail">Carregando...</p>
                            </div>
                            
                            <div class="info-item">
                                <label>Data de Entrada</label>
                                <p id="userJoinDate">Carregando...</p>
                            </div>
                            
                            <div class="info-item">
                                <label>Tipo de Conta</label>
                                <p>
                                    <span class="badge-success" id="userRole">Usu√°rio</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Saldo e Estat√≠sticas -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Saldo Atual</h2>
                    </div>
                    
                    <div class="balance-section">
                        <div style="text-align: center; margin-bottom: 32px;">
                            <div class="stat-value" id="currentBalance">R$ 0,00</div>
                            <p class="stat-label">Saldo Dispon√≠vel</p>
                        </div>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value" style="color: var(--success);" id="monthIncome">R$ 0,00</div>
                                <div class="stat-label">Entradas este m√™s</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-value" style="color: var(--error);" id="monthExpense">R$ 0,00</div>
                                <div class="stat-label">Sa√≠das este m√™s</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- √öltimas Transa√ß√µes -->
            <div class="card" style="margin-top: 32px;">
                <div class="card-header">
                    <h2 class="card-title">√öltimas Transa√ß√µes</h2>
                    <a href="hist.html" class="btn btn-outline btn-small">
                        Ver Todas
                        <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
                
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Descri√ß√£o</th>
                                <th>Categoria</th>
                                <th>Data</th>
                                <th>Valor</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="recentTransactions">
                            <tr>
                                <td colspan="5" style="text-align: center; padding: 40px; color: var(--secondary);">
                                    <i class="fas fa-spinner fa-spin"></i> Carregando transa√ß√µes...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <script>
     document.addEventListener('DOMContentLoaded', function() {
        console.log('P√°gina perfil carregada');
        
        // Verifica√ß√£o de autentica√ß√£o
        if (!window.authManager || !window.authManager.requireAuth()) {
            console.log('Usu√°rio n√£o autenticado, redirecionando...');
            return;
        }
        
        initializePage();
    });

    function initializePage() {
        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        if (themeToggle) {
            themeToggle.addEventListener('click', () => {
                document.body.dataset.theme = document.body.dataset.theme === 'dark' ? 'light' : 'dark';
                themeToggle.innerHTML = document.body.dataset.theme === 'dark' 
                    ? '<i class="fas fa-sun"></i>' 
                    : '<i class="fas fa-moon"></i>';
            });
        }

        // Menu mobile
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const navMenu = document.getElementById('navMenu');
        
        if (mobileMenuBtn && navMenu) {
            mobileMenuBtn.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                const icon = mobileMenuBtn.querySelector('i');
                if (navMenu.classList.contains('active')) {
                    icon.className = 'fas fa-times';
                } else {
                    icon.className = 'fas fa-bars';
                }
            });
        }

        // Fechar menu mobile ao clicar fora
        document.addEventListener('click', (e) => {
            if (navMenu && mobileMenuBtn && 
                !e.target.closest('.nav-menu') && 
                !e.target.closest('.mobile-menu-btn')) {
                navMenu.classList.remove('active');
                const icon = mobileMenuBtn.querySelector('i');
                icon.className = 'fas fa-bars';
            }
        });

        // Carregar dados do perfil
        loadProfileData();
        
        console.log('Perfil inicializado com sucesso');
    }

    // =============================================
    // SISTEMA DE DADOS COMPARTILHADO
    // =============================================

    // Obter transa√ß√µes do localStorage
    function getTransactions() {
        try {
            const transactions = JSON.parse(localStorage.getItem('finsync_transactions') || '[]');
            console.log('üìä Transa√ß√µes carregadas:', transactions.length);
            return transactions;
        } catch (error) {
            console.error('Erro ao carregar transa√ß√µes:', error);
            return [];
        }
    }

    // Formatar moeda
    function formatCurrency(value) {
        return new Intl.NumberFormat('pt-BR', {
            style: 'currency',
            currency: 'BRL'
        }).format(value);
    }

    // Formatar data
    function formatDate(dateString) {
        try {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        } catch (error) {
            return dateString;
        }
    }

    // Obter nome da categoria
    function getCategoryName(category) {
        const categories = {
            'salario': 'Sal√°rio',
            'alimentacao': 'Alimenta√ß√£o',
            'transporte': 'Transporte',
            'moradia': 'Moradia',
            'saude': 'Sa√∫de',
            'educacao': 'Educa√ß√£o',
            'lazer': 'Lazer',
            'compras': 'Compras',
            'investimentos': 'Investimentos',
            'outros': 'Outros'
        };
        return categories[category] || category;
    }

    // Obter √≠cone da categoria
    function getCategoryIcon(category) {
        const icons = {
            'salario': 'fas fa-money-bill-wave',
            'alimentacao': 'fas fa-utensils',
            'transporte': 'fas fa-bus',
            'moradia': 'fas fa-home',
            'saude': 'fas fa-heartbeat',
            'educacao': 'fas fa-graduation-cap',
            'lazer': 'fas fa-film',
            'compras': 'fas fa-shopping-bag',
            'investimentos': 'fas fa-chart-line',
            'outros': 'fas fa-circle'
        };
        return icons[category] || 'fas fa-circle';
    }

    // Calcular estat√≠sticas
    function calculateStats() {
        const transactions = getTransactions();
        const currentMonth = new Date().getMonth();
        const currentYear = new Date().getFullYear();
        
        // Calcular totais gerais
        const totalIncome = transactions
            .filter(t => t.type === 'income')
            .reduce((sum, t) => sum + (parseFloat(t.amount) || 0), 0);
            
        const totalExpense = transactions
            .filter(t => t.type === 'expense')
            .reduce((sum, t) => sum + (parseFloat(t.amount) || 0), 0);
        
        const totalBalance = totalIncome - totalExpense;
        
        // Calcular totais do m√™s atual
        const monthlyTransactions = transactions.filter(transaction => {
            try {
                const transactionDate = new Date(transaction.date);
                return transactionDate.getMonth() === currentMonth && 
                       transactionDate.getFullYear() === currentYear;
            } catch (error) {
                return false;
            }
        });
        
        const monthIncome = monthlyTransactions
            .filter(t => t.type === 'income')
            .reduce((sum, t) => sum + (parseFloat(t.amount) || 0), 0);
            
        const monthExpense = monthlyTransactions
            .filter(t => t.type === 'expense')
            .reduce((sum, t) => sum + (parseFloat(t.amount) || 0), 0);
        
        return {
            totalBalance: totalBalance,
            monthIncome: monthIncome,
            monthExpense: monthExpense,
            transactionsCount: transactions.length,
            monthlyTransactionsCount: monthlyTransactions.length
        };
    }

    // =============================================
    // FUN√á√ïES DO PERFIL
    // =============================================
    function loadProfileData() {
        console.log('üîÑ Carregando dados do perfil...');
        
        // Carregar dados do usu√°rio
        const userData = getUserData();
        
        updateElement('userName', userData.name);
        updateElement('userEmail', userData.email);
        updateElement('userInitials', getUserInitials(userData.name));
        updateElement('userJoinDate', formatDate(userData.createdAt));
        
        // Tipo de conta
        const roleElement = document.getElementById('userRole');
        if (userData.role === 'admin') {
            roleElement.textContent = 'Administrador';
            roleElement.className = 'badge-success';
        } else {
            roleElement.textContent = 'Usu√°rio';
            roleElement.className = 'badge-success';
        }
        
        // Carregar dados financeiros
        loadFinancialData();
        loadRecentTransactions();
        
        console.log('‚úÖ Perfil carregado com sucesso');
    }

    function updateElement(id, content) {
        const element = document.getElementById(id);
        if (element) {
            element.textContent = content;
        }
    }

    function getUserData() {
        const userData = localStorage.getItem('blync_user');
        if (userData) {
            return JSON.parse(userData);
        }
        
        // Fallback para dados padr√£o
        const defaultUserData = {
            name: 'Usu√°rio Blync',
            email: 'usuario@blync.com',
            role: 'user',
            createdAt: new Date().toISOString()
        };
        
        // Salvar dados padr√£o
        localStorage.setItem('blync_user', JSON.stringify(defaultUserData));
        
        return defaultUserData;
    }

    function getUserInitials(name) {
        if (!name) return 'US';
        return name.split(' ')
                  .map(n => n[0])
                  .join('')
                  .toUpperCase()
                  .substring(0, 2);
    }

    function loadFinancialData() {
        const stats = calculateStats();
        updateElement('currentBalance', formatCurrency(stats.totalBalance));
        updateElement('monthIncome', formatCurrency(stats.monthIncome));
        updateElement('monthExpense', formatCurrency(stats.monthExpense));
    }

    function loadRecentTransactions() {
        const transactions = getTransactions()
            .sort((a, b) => new Date(b.date) - new Date(a.date))
            .slice(0, 5);
        
        const tbody = document.getElementById('recentTransactions');
        if (!tbody) return;
        
        if (transactions.length === 0) {
            tbody.innerHTML = `
                <tr>
                    <td colspan="5" style="text-align: center; padding: 40px; color: var(--secondary);">
                        <i class="fas fa-receipt" style="font-size: 2rem; margin-bottom: 12px; display: block; opacity: 0.5;"></i>
                        Nenhuma transa√ß√£o encontrada
                        <br>
                        <a href="novatransacao.html" class="btn btn-primary btn-small" style="margin-top: 12px;">
                            <i class="fas fa-plus"></i>
                            Adicionar Primeira Transa√ß√£o
                        </a>
                    </td>
                </tr>
            `;
            return;
        }
        
        tbody.innerHTML = transactions.map(transaction => {
            const amount = parseFloat(transaction.amount) || 0;
            const isIncome = transaction.type === 'income';
            
            return `
                <tr>
                    <td style="font-weight: 500;">${transaction.description || 'Sem descri√ß√£o'}</td>
                    <td>
                        <span style="display: inline-flex; align-items: center; gap: 4px;">
                            <i class="${getCategoryIcon(transaction.category)}" style="font-size: 12px;"></i>
                            ${getCategoryName(transaction.category)}
                        </span>
                    </td>
                    <td>${formatDate(transaction.date)}</td>
                    <td style="color: ${isIncome ? 'var(--success)' : 'var(--error)'}; font-weight: 600;">
                        ${isIncome ? '+' : '-'} ${formatCurrency(amount)}
                    </td>
                    <td>
                        <span class="${isIncome ? 'badge-success' : 'badge-error'}">
                            ${isIncome ? 'Entrada' : 'Sa√≠da'}
                        </span>
                    </td>
                </tr>
            `;
        }).join('');
    }

    // Atualizar dados quando a p√°gina fica vis√≠vel novamente
    document.addEventListener('visibilitychange', function() {
        if (!document.hidden) {
            console.log('üîÑ P√°gina vis√≠vel - atualizando dados do perfil...');
            loadProfileData();
        }
    });

    // =============================================
    // FUN√á√ïES DE DESENVOLVIMENTO
    // =============================================

    // Adicionar dados de exemplo
    function addSampleData() {
        const existingTransactions = getTransactions();
        if (existingTransactions.length > 0) {
            if (!confirm('J√° existem transa√ß√µes no sistema. Deseja adicionar dados de exemplo mesmo assim?')) {
                return;
            }
        }
        
        const sampleTransactions = [
            {
                id: Date.now().toString(),
                type: 'income',
                description: 'Sal√°rio Mensal',
                amount: 3500.00,
                date: new Date().toISOString().split('T')[0],
                category: 'salario',
                paymentMethod: 'transferencia',
                notes: 'Sal√°rio referente ao m√™s atual',
                createdAt: new Date().toISOString()
            },
            {
                id: (Date.now() + 1).toString(),
                type: 'expense',
                description: 'Supermercado',
                amount: 256.33,
                date: new Date().toISOString().split('T')[0],
                category: 'alimentacao',
                paymentMethod: 'debito',
                notes: 'Compra do m√™s',
                createdAt: new Date().toISOString()
            },
            {
                id: (Date.now() + 2).toString(),
                type: 'expense',
                description: 'Aluguel',
                amount: 1200.00,
                date: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                category: 'moradia',
                paymentMethod: 'transferencia',
                notes: 'Aluguel do apartamento',
                createdAt: new Date().toISOString()
            },
            {
                id: (Date.now() + 3).toString(),
                type: 'income',
                description: 'Freelance',
                amount: 800.00,
                date: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                category: 'outros',
                paymentMethod: 'pix',
                notes: 'Trabalho freelance',
                createdAt: new Date().toISOString()
            }
        ];
        
        // Se j√° existem transa√ß√µes, adicionar √†s existentes
        if (existingTransactions.length > 0) {
            const allTransactions = [...existingTransactions, ...sampleTransactions];
            localStorage.setItem('finsync_transactions', JSON.stringify(allTransactions));
        } else {
            localStorage.setItem('finsync_transactions', JSON.stringify(sampleTransactions));
        }
        
        // Atualizar dados do usu√°rio se n√£o existirem
        const currentUserData = localStorage.getItem('blync_user');
        if (!currentUserData) {
            const userData = {
                name: 'Jo√£o Silva',
                email: 'joao.silva@email.com',
                role: 'user',
                createdAt: new Date().toISOString()
            };
            localStorage.setItem('blync_user', JSON.stringify(userData));
        }
        
        loadProfileData();
        alert('Dados de exemplo adicionados com sucesso!');
    }

    // Debug function
    function debugProfile() {
        const transactions = getTransactions();
        const userData = getUserData();
        const stats = calculateStats();
        
        console.log('=== DEBUG PERFIL ===');
        console.log('Dados do usu√°rio:', userData);
        console.log('Transa√ß√µes:', transactions.length);
        console.log('Estat√≠sticas:', stats);
        console.log('Saldo:', stats.totalBalance);
        
        alert(`Debug Perfil:\nUsu√°rio: ${userData.name}\nTransa√ß√µes: ${transactions.length}\nSaldo: ${formatCurrency(stats.totalBalance)}\nVerifique o console para detalhes.`);
    }

    // Adicionar bot√µes de debug em desenvolvimento
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        document.addEventListener('DOMContentLoaded', function() {
            const debugDiv = document.createElement('div');
            debugDiv.style.marginTop = '16px';
            debugDiv.style.display = 'flex';
            debugDiv.style.gap = '8px';
            debugDiv.style.flexWrap = 'wrap';
            
            // const sampleButton = document.createElement('button');
            // sampleButton.type = 'button';
            // sampleButton.className = 'btn btn-primary';
            // sampleButton.innerHTML = '<i class="fas fa-vial"></i> Dados Exemplo';
            // sampleButton.onclick = addSampleData;
            
            const debugButton = document.createElement('button');
            debugButton.type = 'button';
            debugButton.className = 'btn btn-outline';
            debugButton.innerHTML = '<i class="fas fa-bug"></i> Debug';
            debugButton.onclick = debugProfile;
            
            debugDiv.appendChild(sampleButton);
            debugDiv.appendChild(debugButton);
            
            const pageHeader = document.querySelector('.page-header');
            if (pageHeader) {
                pageHeader.appendChild(debugDiv);
            }
        });
    }

    // Fun√ß√£o para atualizar dados do usu√°rio (para uso futuro)
    function updateUserProfile() {
        const newName = prompt('Digite seu novo nome:', getUserData().name);
        if (newName && newName.trim()) {
            const userData = getUserData();
            userData.name = newName.trim();
            localStorage.setItem('blync_user', JSON.stringify(userData));
            loadProfileData();
            alert('Nome atualizado com sucesso!');
        }
    }

    // Adicionar bot√£o de edi√ß√£o se necess√°rio
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        document.addEventListener('DOMContentLoaded', function() {
            const editButton = document.createElement('button');
            editButton.type = 'button';
            editButton.className = 'btn btn-outline btn-small';
            editButton.innerHTML = '<i class="fas fa-edit"></i> Editar Nome';
            editButton.onclick = updateUserProfile;
            editButton.style.marginTop = '8px';
            
            const userInfoCard = document.querySelector('.user-info');
            if (userInfoCard) {
                userInfoCard.appendChild(editButton);
            }
        });
    }
    </script>
</body>
</html>